{"ast":null,"code":"var _s = $RefreshSig$();\n\nimport React from \"react\";\nimport Button from \"react-bootstrap/Button\"; // import Form from \"react-bootstrap/Form\";\n\nimport images1 from \"./images/social.JPG\";\nimport AuthService from \"./services/auth.service\";\nimport { useState, useEffect } from \"react\";\nimport { Link, BrowserRouter, useParams } from \"react-router-dom\"; // import { ToastContainer, toast } from \"react-toastify\";\n\nimport Form from \"react-validation/build/form\";\nimport Input from \"react-validation/build/input\";\nimport CheckButton from \"react-validation/build/button\";\nimport authService from \"./services/auth.service\";\n\nconst Login = () => {\n  _s();\n\n  //   const user = { username,  password };\n  //   const onChangeUsername=(e) =>{\n  //     this.setState({\n  //       username: e.target.value,\n  //     });\n  //   }\n  //  const  onChangePassword=(e)=> {\n  //     this.setState({\n  //       password: e.target.value,\n  //     });\n  //   }\n  //  const handleLogin = (e) => {\n  //   // const user = { username, password };\n  //    e.preventDefault();\n  //    this.setState({\n  //      message: \"\",\n  //      loading: true,\n  //    });\n  //    this.form.validateAll();\n  //    if (this.checkBtn.context._errors.length === 0) {\n  //      AuthService.login(user.data.username, user.data.password).then(\n  //        () => {\n  //          this.props.history.push(\"/profile\");\n  //          window.location.reload();\n  //        },\n  //        (error) => {\n  //          const resMessage =\n  //            (error.response &&\n  //              error.response.data &&\n  //              error.response.data.message) ||\n  //            error.message ||\n  //            error.toString();\n  //          this.setState({\n  //            loading: false,\n  //            message: resMessage,\n  //          });\n  //        }\n  //      );\n  //    } else {\n  //      this.setState({\n  //        loading: false,\n  //      });\n  //    }\n  //    const required = (value) => {\n  //      if (!value) {\n  //        return (\n  //          <div className=\"alert alert-danger\" role=\"alert\">\n  //            This field is required!\n  //          </div>\n  //        );\n  //      }\n  //    };\n  //  };\n  //   return (\n  //     <div id=\"loginform\">\n  //       <Form\n  //         onSubmit={handleLogin}\n  //         ref={(c) => {\n  //           this.form = c;\n  //         }}\n  //       >\n  //         <div className=\"form-group\">\n  //           <label htmlFor=\"username\">Username</label>\n  //           <Input\n  //             type=\"text\"\n  //             className=\"form-control\"\n  //             name=\"username\"\n  //             value={user.data.username}\n  //             onChange={(e) => onChangeUsername(e.target.value)}\n  //           />\n  //         </div>\n  //         <div className=\"form-group\">\n  //           <label htmlFor=\"password\">Password</label>\n  //           <Input\n  //             type=\"password\"\n  //             className=\"form-control\"\n  //             name=\"password\"\n  //             value={user.data.password}\n  //             onChange={(e) => onChangePassword(e.target.value)}\n  //           />\n  //         </div>\n  //         <div className=\"form-group\">\n  //           <button\n  //             className=\"btn btn-primary btn-block\"\n  //             disabled={this.state.loading}\n  //           >\n  //             {this.state.loading && (\n  //               <span className=\"spinner-border spinner-border-sm\"></span>\n  //             )}\n  //             <span>Login</span>\n  //           </button>\n  //         </div>\n  //         {this.state.message && (\n  //           <div className=\"form-group\">\n  //             <div className=\"alert alert-danger\" role=\"alert\">\n  //               {this.state.message}\n  //             </div>\n  //           </div>\n  //         )}\n  //         <CheckButton\n  //           style={{ display: \"none\" }}\n  //           ref={(c) => {\n  //             this.checkBtn = c;\n  //           }}\n  //         />\n  //       </Form>\n  //       <div>\n  //         <footer id=\"footer1\">\n  //           <ul class=\"navbar-nav\">\n  //             <li>\n  //               Get connected with us on\n  //               <img\n  //                 src={images1}\n  //                 alt=\"My Image\"\n  //                 style={{ height: \"3rem\", width: \"27rem\" }}\n  //               />\n  //             </li>\n  //           </ul>\n  //         </footer>\n  //       </div>\n  //     </div>\n  // );\n  const [username, setUsername] = useState(\"\");\n  const [password, setPassword] = useState(\"\");\n  const history = BrowserRouter();\n  const [usernameValid, setUsernameValid] = useState(false);\n  const [passwordValid, setPasswordValid] = useState(false);\n  const [usernameTouched, setUsernameTouched] = useState(false);\n  const [passwordTouched, setPasswordTouched] = useState(false);\n  const [errAlert, setErrAlert] = useState(false);\n\n  const usernameHandler = e => {\n    setUsername(e.target.value);\n\n    if (e.target.value.trim() !== \"\") {\n      setUsernameValid(true);\n    }\n  };\n\n  const passwordHandler = e => {\n    setPassword(e.target.value);\n\n    if (e.target.value.trim() !== \"\") {\n      setPasswordValid(true);\n    }\n  }; // blur handler\n\n\n  const usernameBlurHandler = e => {\n    if (username.trim() == \"\") {\n      setUsernameTouched(true);\n      setUsernameValid(false);\n      return;\n    }\n  };\n\n  const passwordBlurHandler = e => {\n    if (password.trim() == \"\") {\n      setPasswordTouched(true);\n      setPasswordValid(false);\n      return;\n    }\n  };\n\n  const saveFarmer = e => {\n    setErrAlert(false);\n    setUsernameTouched(true);\n    setPasswordTouched(true);\n\n    if (username.trim() === \"\") {\n      setUsernameValid(false);\n      return;\n    }\n\n    setUsernameValid(true);\n\n    if (password.trim() === \"\") {\n      setPasswordValid(false);\n      return;\n    }\n\n    setPasswordValid(true);\n    farmerService.login(username, password).then(() => {\n      const user = authService.getCurrentUser();\n      console.log(user.jwt);\n      console.log(user.id);\n      con.success(\"Login Sussessful\");\n\n      if (user.role == \"ROLE_FARMER\") {\n        history.push(`/farmerDashboard`);\n      } else {\n        history.push(`/error`);\n        console.error(\"You are not a farmer\");\n      }\n    }).catch(error => {\n      setErrAlert(true);\n      toast.error(\"Wrong Username or Password\"); // alert(\"Wrong UserName or Password\");\n    });\n    console.log(username, password);\n  };\n\n  const addAlert = \"Wrong UserName or Password\";\n  const usernameInputValid = !usernameValid && usernameTouched;\n  const passwordInputValid = !passwordValid && passwordTouched;\n  const usernameStyle = usernameInputValid ? \" form-control col-8 border border-3 border-danger\" : \"\";\n  const passwordStyle = passwordInputValid ? \" form-control col-8 border border-3 border-danger\" : \"\";\n  const sty = ``;\n};\n\n_s(Login, \"M7IHLNKUf9GA4qXj1YpLIL6Ex48=\");\n\n_c = Login;\nexport default Login;\n\nvar _c;\n\n$RefreshReg$(_c, \"Login\");","map":{"version":3,"names":["React","Button","images1","AuthService","useState","useEffect","Link","BrowserRouter","useParams","Form","Input","CheckButton","authService","Login","username","setUsername","password","setPassword","history","usernameValid","setUsernameValid","passwordValid","setPasswordValid","usernameTouched","setUsernameTouched","passwordTouched","setPasswordTouched","errAlert","setErrAlert","usernameHandler","e","target","value","trim","passwordHandler","usernameBlurHandler","passwordBlurHandler","saveFarmer","farmerService","login","then","user","getCurrentUser","console","log","jwt","id","con","success","role","push","error","catch","toast","addAlert","usernameInputValid","passwordInputValid","usernameStyle","passwordStyle","sty"],"sources":["E:/casestudy/task/src/Login.js"],"sourcesContent":["import React from \"react\";\r\nimport Button from \"react-bootstrap/Button\";\r\n// import Form from \"react-bootstrap/Form\";\r\nimport images1 from \"./images/social.JPG\";\r\nimport AuthService from \"./services/auth.service\";\r\nimport { useState, useEffect } from \"react\";\r\nimport { Link, BrowserRouter, useParams } from \"react-router-dom\";\r\n// import { ToastContainer, toast } from \"react-toastify\";\r\nimport Form from \"react-validation/build/form\";\r\nimport Input from \"react-validation/build/input\";\r\nimport CheckButton from \"react-validation/build/button\";\r\nimport authService from \"./services/auth.service\";\r\nconst Login = () => {\r\n \r\n//   const user = { username,  password };\r\n//   const onChangeUsername=(e) =>{\r\n//     this.setState({\r\n//       username: e.target.value,\r\n//     });\r\n//   }\r\n//  const  onChangePassword=(e)=> {\r\n//     this.setState({\r\n//       password: e.target.value,\r\n//     });\r\n//   }\r\n \r\n//  const handleLogin = (e) => {\r\n//   // const user = { username, password };\r\n  \r\n//    e.preventDefault();\r\n//    this.setState({\r\n//      message: \"\",\r\n//      loading: true,\r\n//    });\r\n//    this.form.validateAll();\r\n//    if (this.checkBtn.context._errors.length === 0) {\r\n//      AuthService.login(user.data.username, user.data.password).then(\r\n//        () => {\r\n//          this.props.history.push(\"/profile\");\r\n//          window.location.reload();\r\n//        },\r\n//        (error) => {\r\n//          const resMessage =\r\n//            (error.response &&\r\n//              error.response.data &&\r\n//              error.response.data.message) ||\r\n//            error.message ||\r\n//            error.toString();\r\n//          this.setState({\r\n//            loading: false,\r\n//            message: resMessage,\r\n//          });\r\n//        }\r\n//      );\r\n//    } else {\r\n//      this.setState({\r\n//        loading: false,\r\n//      });\r\n//    }\r\n\r\n//    const required = (value) => {\r\n//      if (!value) {\r\n//        return (\r\n//          <div className=\"alert alert-danger\" role=\"alert\">\r\n//            This field is required!\r\n//          </div>\r\n//        );\r\n//      }\r\n//    };\r\n//  };\r\n \r\n \r\n//   return (\r\n//     <div id=\"loginform\">\r\n//       <Form\r\n//         onSubmit={handleLogin}\r\n//         ref={(c) => {\r\n//           this.form = c;\r\n//         }}\r\n//       >\r\n//         <div className=\"form-group\">\r\n//           <label htmlFor=\"username\">Username</label>\r\n//           <Input\r\n//             type=\"text\"\r\n//             className=\"form-control\"\r\n//             name=\"username\"\r\n//             value={user.data.username}\r\n//             onChange={(e) => onChangeUsername(e.target.value)}\r\n//           />\r\n//         </div>\r\n//         <div className=\"form-group\">\r\n//           <label htmlFor=\"password\">Password</label>\r\n//           <Input\r\n//             type=\"password\"\r\n//             className=\"form-control\"\r\n//             name=\"password\"\r\n//             value={user.data.password}\r\n//             onChange={(e) => onChangePassword(e.target.value)}\r\n//           />\r\n//         </div>\r\n//         <div className=\"form-group\">\r\n//           <button\r\n//             className=\"btn btn-primary btn-block\"\r\n//             disabled={this.state.loading}\r\n//           >\r\n//             {this.state.loading && (\r\n//               <span className=\"spinner-border spinner-border-sm\"></span>\r\n//             )}\r\n//             <span>Login</span>\r\n//           </button>\r\n//         </div>\r\n//         {this.state.message && (\r\n//           <div className=\"form-group\">\r\n//             <div className=\"alert alert-danger\" role=\"alert\">\r\n//               {this.state.message}\r\n//             </div>\r\n//           </div>\r\n//         )}\r\n//         <CheckButton\r\n//           style={{ display: \"none\" }}\r\n//           ref={(c) => {\r\n//             this.checkBtn = c;\r\n//           }}\r\n//         />\r\n//       </Form>\r\n//       <div>\r\n//         <footer id=\"footer1\">\r\n//           <ul class=\"navbar-nav\">\r\n//             <li>\r\n//               Get connected with us on\r\n//               <img\r\n//                 src={images1}\r\n//                 alt=\"My Image\"\r\n//                 style={{ height: \"3rem\", width: \"27rem\" }}\r\n//               />\r\n//             </li>\r\n//           </ul>\r\n//         </footer>\r\n//       </div>\r\n//     </div>\r\n  // );\r\n\r\n\r\n  const [username, setUsername] = useState(\"\");\r\n  const [password, setPassword] = useState(\"\");\r\n  const history = BrowserRouter();\r\n\r\n  const [usernameValid, setUsernameValid] = useState(false);\r\n  const [passwordValid, setPasswordValid] = useState(false);\r\n\r\n  const [usernameTouched, setUsernameTouched] = useState(false);\r\n  const [passwordTouched, setPasswordTouched] = useState(false);\r\n  const [errAlert, setErrAlert] = useState(false);\r\n  const usernameHandler = (e) => {\r\n    setUsername(e.target.value);\r\n    if (e.target.value.trim() !== \"\") {\r\n      setUsernameValid(true);\r\n    }\r\n  };\r\n\r\n  const passwordHandler = (e) => {\r\n    setPassword(e.target.value);\r\n    if (e.target.value.trim() !== \"\") {\r\n      setPasswordValid(true);\r\n    }\r\n  };\r\n\r\n  // blur handler\r\n  const usernameBlurHandler = (e) => {\r\n    if (username.trim() == \"\") {\r\n      setUsernameTouched(true);\r\n      setUsernameValid(false);\r\n      return;\r\n    }\r\n  };\r\n\r\n  const passwordBlurHandler = (e) => {\r\n    if (password.trim() == \"\") {\r\n      setPasswordTouched(true);\r\n      setPasswordValid(false);\r\n      return;\r\n    }\r\n  };\r\n\r\n  const saveFarmer = (e) => {\r\n    setErrAlert(false);\r\n    setUsernameTouched(true);\r\n    setPasswordTouched(true);\r\n\r\n    if (username.trim() === \"\") {\r\n      setUsernameValid(false);\r\n      return;\r\n    }\r\n    setUsernameValid(true);\r\n\r\n    if (password.trim() === \"\") {\r\n      setPasswordValid(false);\r\n      return;\r\n    }\r\n    setPasswordValid(true);\r\n    farmerService\r\n      .login(username, password)\r\n      .then(() => {\r\n        const user = authService.getCurrentUser();\r\n        console.log(user.jwt);\r\n        console.log(user.id);\r\n        con.success(\"Login Sussessful\");\r\n        if (user.role == \"ROLE_FARMER\") {\r\n          history.push(`/farmerDashboard`);\r\n        } else {\r\n          history.push(`/error`);\r\n          console.error(\"You are not a farmer\");\r\n        }\r\n      })\r\n      \r\n      .catch((error) => {\r\n        setErrAlert(true);\r\n        toast.error(\"Wrong Username or Password\");\r\n\r\n        // alert(\"Wrong UserName or Password\");\r\n      });\r\n    console.log(username, password);\r\n  };\r\n   const addAlert = \"Wrong UserName or Password\";\r\n   const usernameInputValid = !usernameValid && usernameTouched;\r\n   const passwordInputValid = !passwordValid && passwordTouched;\r\n\r\n   const usernameStyle = usernameInputValid\r\n     ? \" form-control col-8 border border-3 border-danger\"\r\n     : \"\";\r\n   const passwordStyle = passwordInputValid\r\n     ? \" form-control col-8 border border-3 border-danger\"\r\n     : \"\";\r\n\r\n   const sty = ``;\r\n\r\n};\r\n\r\nexport default Login;\r\n"],"mappings":";;AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,OAAOC,MAAP,MAAmB,wBAAnB,C,CACA;;AACA,OAAOC,OAAP,MAAoB,qBAApB;AACA,OAAOC,WAAP,MAAwB,yBAAxB;AACA,SAASC,QAAT,EAAmBC,SAAnB,QAAoC,OAApC;AACA,SAASC,IAAT,EAAeC,aAAf,EAA8BC,SAA9B,QAA+C,kBAA/C,C,CACA;;AACA,OAAOC,IAAP,MAAiB,6BAAjB;AACA,OAAOC,KAAP,MAAkB,8BAAlB;AACA,OAAOC,WAAP,MAAwB,+BAAxB;AACA,OAAOC,WAAP,MAAwB,yBAAxB;;AACA,MAAMC,KAAK,GAAG,MAAM;EAAA;;EAEpB;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EAEA;EACA;EAEA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EAEA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EAGA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACE;EAGA,MAAM,CAACC,QAAD,EAAWC,WAAX,IAA0BX,QAAQ,CAAC,EAAD,CAAxC;EACA,MAAM,CAACY,QAAD,EAAWC,WAAX,IAA0Bb,QAAQ,CAAC,EAAD,CAAxC;EACA,MAAMc,OAAO,GAAGX,aAAa,EAA7B;EAEA,MAAM,CAACY,aAAD,EAAgBC,gBAAhB,IAAoChB,QAAQ,CAAC,KAAD,CA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"},"metadata":{},"sourceType":"module"}